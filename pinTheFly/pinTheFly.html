<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="pinTheFly.css">
    </head>
    
    
    
    <body>     
        <script src="pinTheFly.js"></script>
        
        <h1 align="center"><img src='images/fly11.png'>&nbsp;&nbsp;
            <img src='images/swat1.cur'>&nbsp;&nbsp;
            <img src='images/fly12.png'>&nbsp;&nbsp;
            Swat The Flies&nbsp;&nbsp;
            <img src='images/fly12.png'>&nbsp;&nbsp;
            <img src='images/swat2.cur'>&nbsp;&nbsp;
            <img src='images/fly11.png'></h1>        
        <hr/>
        
        <div align="center">Try to Swat Those Pesky Flies and Pin Them to The Wall Before They Escape!!</div>
        
        <table align="center">
            <tr><td>
                    <input id="numflies" type="number" style="width: 50px" value="50" >
                </td>
                <td>
                    <input onclick="pinflies()" type="button" value="Start Swatting" />
                </td>
            </tr>
        </table>
        <hr/>
        <div align="center">
            <table width="700">
                <tr><th>Original Flies:</th><th id="flyCount">0</th>
                    <th>Swatted Flies:</th><th id="pinned">0</th>
                    <th>Escaped Flies:</th><th id="escaped">0</th>
                </tr></table>
        </div>
        
     
        <div align="center">
            <canvas  id="box" width="700" height="350" style="border: 2px solid black;">
            </canvas>
        </div>
        <div class='result hide'>
            <p>Swatted Flies: <div><img src='images/fly12.png'> <div id='finalSwatted'></div></div></p>
            <p>Escaped Flies: <div><img src='images/fly11.png'> <div id='finalEscaped'></div></div></p>
        </div>
                
        <hr/>
        <p><a href="../index.html">Back</a> </p> 
    </body>
    
    <script>
        // add event listener for clicking on canvas
        var canv = document.getElementById('box');
        canv.addEventListener('click', didISwatAFly);
        canv.addEventListener('mouseup', flySwattUp);
        canv.addEventListener('mousedown', flySwattDown);
        
        // add sounds for swatting and for buzzing
        var sndswat = new Audio('sounds/whip2.mp3'),
            sndbuzz = new Audio('sounds/flyBuzzing1.mp3'),
            sndsquish = new Audio('sounds/scream1.mp3');
            //sndsquish = new Audio('squish1.mp3');
        
        
        // set up document variables
        document.pinned = [];
        document.flies = [];
        document.escaped = 0;
        
        // set up cursor image to change to swatter when over canvas
        document.getElementById("box").style.cursor = "url('images/swat1.cur'), auto";        
        
        // reset the game variables and start playing
        var game;
        function pinflies(){ 
            document.pinned = [];
            document.flies = [];
            document.escaped = 0;
            var result = document.getElementsByClassName('result');
            result[0].setAttribute('class', 'result hide');
            document.getElementById('flyCount').innerHTML = document.getElementById("numflies").value;
            createFlies();
            game = setInterval(drawCanvas,20); // draw canvas every XXX ms
            
        }
        
        // gets the x and y co-ordinates of cursor and passes it on to swatFly which
        //   checks to see if any fly was close to it
        function didISwatAFly(event){
            swatFly(event.x, event.y);         
        } 
        
        // sets the curssor image and resets swat sound
        function flySwattUp(){
            document.getElementById("box").style.cursor = "url('images/swat1.cur'), auto";
            sndswat.currentTime = 0;
        }
        
        // sets the cursor image and starts swat sound
        function flySwattDown(){
            document.getElementById("box").style.cursor = "url('images/swat2.cur'), auto";
            sndswat.play();
        }
        
    </script>
    
</html>